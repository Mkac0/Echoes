{% extends "base.html" %}
{% block content %}

<h2>{{ object.year }} {{ object.make }} {{ object.model }}</h2>
<div class="car-meta">
    <p>
        VIN: <strong>{{ object.vin }}</strong>
        Mileage: {{ object.mileage }}
        Price: ${{ object.price }}
        Condition: {{ object.condition }}
    </p>
    <p>Status: <span class="status-{{ object.status }}">{{ object.get_status_display }}</span></p>
</div>
{% if user.is_authenticated == object.owner %}
    <div class="action-links">
        <a href="{% url 'car-update' object.pk %}" class="btn-primary">Edit</a>
        <a href="{% url 'car-delete' object.pk %}" class="btn-delete">Delete</a>
    </div>
{% endif %}
<h3>Photos ({{ object.photos.count }})</h3>
<div class="car-photos-grid">
    {% for p in object.photos.all %}
        <ul class="photo-item">
            <img src="{{ p.image.url }}" alt="{{ p.caption|default:object.make }}"> 
            {% if p.caption %}<figcaption>{{ p.caption }}</figcaption>{% endif %}
        </ul>
    {% empty %}
        <p>No photos have been uploaded yet.</p>
    {% endfor %}
</div>
{% if user.is_authenticated and user == object.owner %}
    <div class="mt-4">
        <a href="{% url 'carphoto-create' object.pk %}" class="btn-secondary">Add Photos</a>
    </div>
{% endif %}

{% endblock %}
